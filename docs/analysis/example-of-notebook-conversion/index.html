<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.30.2" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Example Of Notebook Conversion </title>

  
  <meta name="description" content="An example of a metatab package, inlined into a Jupyter notebook."> 
  
  
  
  
  

    

  <meta name="author" content="San Diego Regional Data Library">


  <meta property="og:title" content="Example Of Notebook Conversion" />
<meta property="og:description" content="An example of a metatab package, inlined into a Jupyter notebook." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://kb.sandiegodata.org/analysis/example-of-notebook-conversion/" />
















  




  
  
  
  
  

  <link rel="canonical" href="http://kb.sandiegodata.org/analysis/example-of-notebook-conversion/">  

  <link rel="shortcut icon" href="/favicon.ico" >

  <link href="/css/font.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.min.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.legenda.css" rel="stylesheet" type="text/css">
  <link href="/css/highlight.css" rel="stylesheet" type="text/css">
  <link href="/css/master.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.demo.css" rel="stylesheet" type="text/css">

 <link href="/css/custom.css" rel="stylesheet" type="text/css">
 <link href="/css/syntax.css" rel="stylesheet" type="text/css">
 

  <script src="/js/jquery-2.1.4.min.js" type="text/javascript">
  </script>

  <script type="text/javascript" src="/js/tocbot.min.js"></script>
</head>


<body class="page-kube">
  <header> <div class="show-sm">
    <div id="nav-toggle-box">
      <div id="nav-toggle-brand">
        <a href="/">CKB</a>
      </div><a data-component="toggleme" data-target="#top" href="#" id="nav-toggle"><i class="kube-menu"></i></a>
    </div>
  </div>
  <div class="hide-sm" id="top">
    <div id="top-brand">
      <a href="/" title="home"><img src="/img/logo.png"></a>
    </div>
    
    <h1>San Diego Data Knowledge Base</h1>
     
    
  </div> </header>
  <main>

<div id="hero" class="wrap">
  <h1>Example Of Notebook Conversion</h1>
    <p>An example of a metatab package, inlined into a Jupyter notebook.</p>
</div>
<ul id="posts">

 <p>Metatab has it&rsquo;s own Notebook conversion process, will will create a Metatab package with the notebook, it&rsquo;s Makrdown and HTML conversion, and the dataset it creates. FOr these conversions, input code cells are by default hidden and must be explicitly re-enabled by starting code cells with <code>%showinput</code></p>

<p>The Notebook can include inline Metatab, in a line-oriented format. These cells are code cells and start with a <code>%%metatab</code> magic.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">%%</span><span class="n">metatab</span> 

<span class="n">Identifier</span><span class="p">:</span> <span class="n">override_this</span>
<span class="n">Identifier</span><span class="p">:</span> <span class="n">this_one_too</span>
<span class="n">Identifier</span><span class="p">:</span> <span class="mi">7108517</span><span class="n">a</span><span class="o">-</span><span class="mi">7163</span><span class="o">-</span><span class="mi">41</span><span class="n">a5</span><span class="o">-</span><span class="mi">943</span><span class="n">d</span><span class="o">-</span><span class="mi">961</span><span class="n">f9a086a3f</span>
<span class="n">Origin</span><span class="p">:</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">Dataset</span><span class="p">:</span> <span class="n">foobar</span><span class="o">.</span><span class="n">com</span> 
<span class="n">Name</span><span class="p">:</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">-</span><span class="n">foobar</span><span class="o">.</span><span class="n">com</span>
    
<span class="o">====</span> <span class="n">Contacts</span>
<span class="n">Wrangler</span><span class="p">:</span> <span class="n">Eric</span> <span class="n">Busboom</span>
<span class="n">Wrangler</span><span class="o">.</span><span class="n">Email</span><span class="p">:</span> <span class="n">eric</span><span class="nd">@civicknowledge.com</span>
<span class="n">Wrangler</span><span class="o">.</span><span class="n">Organization</span><span class="p">:</span> <span class="n">Civic</span> <span class="n">Knowledge</span>

<span class="o">====</span> <span class="n">References</span>
<span class="n">Reference</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">public</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">civicknowledge</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">renter_cost</span><span class="o">.</span><span class="n">csv</span>
<span class="n">Reference</span><span class="o">.</span><span class="n">Name</span><span class="p">:</span> <span class="n">reference</span>
<span class="n">Reference</span><span class="o">.</span><span class="n">Title</span><span class="p">:</span> <span class="n">The</span> <span class="n">First</span> <span class="n">Example</span> <span class="n">Data</span> <span class="n">File</span>
<span class="n">Reference</span><span class="o">.</span><span class="n">Startline</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Reference</span><span class="o">.</span><span class="n">HeaderLines</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span>
    
<span class="o">====</span> <span class="n">Resources</span>
<span class="n">Datafile</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">public</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">civicknowledge</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">renter_cost</span><span class="o">.</span><span class="n">csv</span>
<span class="n">Datafile</span><span class="o">.</span><span class="n">Name</span><span class="p">:</span> <span class="n">ext_resource</span>
<span class="n">Datafile</span><span class="o">.</span><span class="n">Title</span><span class="p">:</span> <span class="n">An</span> <span class="n">Extern</span> <span class="n">CSV</span> <span class="n">Resource</span>
<span class="n">Datafile</span><span class="o">.</span><span class="n">Startline</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Datafile</span><span class="o">.</span><span class="n">HeaderLines</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span></code></pre></div>
<p><h2>example.com-foobar.com</h2>
<p></p></p>

<p></p>

<p><h3>Contacts</h3>
<p><strong>Wrangler:</strong> <a href="mailto:eric@civicknowledge.com">Eric Busboom</a> </p>
<h3>Resources</h3>
<p><ol>
<li><p><strong>ext_resource</strong> - <a target="_blank" href="http://public.source.civicknowledge.com/example.com/sources/renter_cost.csv"><a href="http://public.source.civicknowledge.com/example.com/sources/renter_cost.csv">http://public.source.civicknowledge.com/example.com/sources/renter_cost.csv</a></a> </p></li>
</ol></p>
<h3>References</h3>
<p><ol>
<li><p><strong>reference</strong> - <a target="_blank" href="http://public.source.civicknowledge.com/example.com/sources/renter_cost.csv"><a href="http://public.source.civicknowledge.com/example.com/sources/renter_cost.csv">http://public.source.civicknowledge.com/example.com/sources/renter_cost.csv</a></a> </p></li></p>
</ol></p>

<p>By default, the metatab document is assigned to the variable named <code>mt_pkg</code>. This document can be displayed to show the package metadata.</p>

<p>Below is a code input cell that will be shown, because it starts with a <code>%mt_showinput</code> magic.</p>

<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>gvid</th>
      <th>renter_cost_gt_30</th>
      <th>renter_cost_gt_30_cv</th>
      <th>owner_cost_gt_30_pct</th>
      <th>owner_cost_gt_30_pct_cv</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0O0P01</td>
      <td>1447</td>
      <td>13.617607</td>
      <td>42.248175</td>
      <td>8.272141</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0O0P03</td>
      <td>5581</td>
      <td>6.235932</td>
      <td>49.280353</td>
      <td>4.933369</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0O0P05</td>
      <td>525</td>
      <td>17.648159</td>
      <td>45.219638</td>
      <td>13.288720</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0O0P07</td>
      <td>352</td>
      <td>28.061965</td>
      <td>47.439353</td>
      <td>17.383329</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0O0P09</td>
      <td>1189</td>
      <td>11.824215</td>
      <td>43.157895</td>
      <td>8.916487</td>
    </tr>
  </tbody>
</table>
</div>

<p>Dataframes can be added to the metatadata as resources with the <code>%mt_add_dataframe df2</code> magic. The <code>references.dataframe()</code> method returns objects of class <code>MetatabDataframe</code>, which have <code>name</code> and <code>title</code> fields that are used in the metadata schemas, and the <code>MetatabSeries.description</code> is used for the column description</p>

<p>When the dataframe is added, Metatab extracts its schema and adds it to the metadata. Fetching the resource and displaying it will show the schema in a prettty format</p>

<p>The HTML output will include any images, but unline the default HTML converted, the images are linked as seperate files into the HTML documentation.</p>

<p><img src="/img/example-of-notebook-conversion/output_16_0.png" alt="png" /></p>

<p>Here is an attachment.</p>

<p><img src="/img/example-of-notebook-conversion/output_17_0.png" alt="Screen%20Shot%202017-11-11%20at%202.13.00%20PM.png" /></p>

  
</ul>
</main>
  <footer> 
    <footer id="footer">
    <nav>
      <ul>
        <li>
          <a href="http://sandiegodata.org">San Diego Regional Data Library</a>
        </li>

      </ul>
    </nav>
  </footer> 
</footer>


  <script src="/js/kube.js" type="text/javascript">
  </script>
  <script src="/js/kube.legenda.js" type="text/javascript">
  </script>
  <script src="/js/master.js" type="text/javascript">
  </script>
</body>

</html>
